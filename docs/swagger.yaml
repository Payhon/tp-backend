definitions:
  dal.AuthMessageTemplate:
    properties:
      channel:
        type: string
      content:
        type: string
      createdAt:
        type: string
      id:
        type: string
      provider:
        type: string
      providerTemplateCode:
        type: string
      remark:
        type: string
      scene:
        type: string
      status:
        type: string
      subject:
        type: string
      tenantID:
        type: string
      updatedAt:
        type: string
    type: object
  dal.WxMpApp:
    properties:
      appID:
        type: string
      appSecret:
        type: string
      createdAt:
        type: string
      id:
        type: string
      remark:
        type: string
      status:
        type: string
      tenantID:
        type: string
      updatedAt:
        type: string
    type: object
  errcode.Error:
    properties:
      code:
        type: integer
      data: {}
      message:
        description: 用于存储自定义消息
        type: string
    type: object
  model.AlarmDeviceCountsResponse:
    properties:
      alarm_device_total:
        description: 告警设备数量
        type: integer
    type: object
  model.AppAuthBindingItem:
    properties:
      id:
        type: string
      identifier:
        type: string
      identity_type:
        type: string
      is_primary:
        type: boolean
      status:
        type: string
      verified_at:
        description: RFC3339 string
        type: string
    type: object
  model.AppAuthBindingsResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.AppAuthBindingItem'
        type: array
      user_id:
        type: string
    type: object
  model.AppBindEmailReq:
    properties:
      email:
        type: string
      verify_code:
        maxLength: 10
        minLength: 4
        type: string
    required:
    - email
    - verify_code
    type: object
  model.AppBindPhoneReq:
    properties:
      phone_number:
        maxLength: 50
        minLength: 5
        type: string
      phone_prefix:
        maxLength: 10
        type: string
      verify_code:
        maxLength: 10
        minLength: 4
        type: string
    required:
    - phone_number
    - verify_code
    type: object
  model.AppEmailLoginByCodeReq:
    properties:
      email:
        type: string
      verify_code:
        maxLength: 10
        minLength: 4
        type: string
    required:
    - email
    - verify_code
    type: object
  model.AppEmailRegisterReq:
    properties:
      email:
        type: string
      password:
        maxLength: 255
        minLength: 6
        type: string
      verify_code:
        maxLength: 10
        minLength: 4
        type: string
    required:
    - email
    - verify_code
    type: object
  model.AppEmailResetPasswordReq:
    properties:
      email:
        type: string
      password:
        maxLength: 255
        minLength: 6
        type: string
      verify_code:
        maxLength: 10
        minLength: 4
        type: string
    required:
    - email
    - password
    - verify_code
    type: object
  model.AppPhoneLoginByCodeReq:
    properties:
      phone_number:
        maxLength: 50
        minLength: 5
        type: string
      phone_prefix:
        maxLength: 10
        type: string
      verify_code:
        maxLength: 10
        minLength: 4
        type: string
    required:
    - phone_number
    - verify_code
    type: object
  model.AppPhoneRegisterReq:
    properties:
      password:
        maxLength: 255
        minLength: 6
        type: string
      phone_number:
        maxLength: 50
        minLength: 5
        type: string
      phone_prefix:
        maxLength: 10
        type: string
      verify_code:
        maxLength: 10
        minLength: 4
        type: string
    required:
    - phone_number
    - verify_code
    type: object
  model.AppPhoneResetPasswordReq:
    properties:
      password:
        maxLength: 255
        minLength: 6
        type: string
      phone_number:
        maxLength: 50
        minLength: 5
        type: string
      phone_prefix:
        maxLength: 10
        type: string
      verify_code:
        maxLength: 10
        minLength: 4
        type: string
    required:
    - password
    - phone_number
    - verify_code
    type: object
  model.AppSendEmailCodeReq:
    properties:
      email:
        type: string
      scene:
        description: LOGIN/REGISTER/RESET_PASSWORD/BIND
        maxLength: 32
        type: string
    required:
    - email
    - scene
    type: object
  model.AppSendPhoneCodeReq:
    properties:
      phone_number:
        description: "13100000000"
        maxLength: 50
        minLength: 5
        type: string
      phone_prefix:
        description: "+86"
        maxLength: 10
        type: string
      scene:
        description: LOGIN/REGISTER/RESET_PASSWORD/BIND
        maxLength: 32
        type: string
    required:
    - phone_number
    - scene
    type: object
  model.AppUnbindReq:
    properties:
      identity_type:
        enum:
        - PHONE
        - EMAIL
        maxLength: 32
        type: string
    required:
    - identity_type
    type: object
  model.AppWxmpBindPhoneReq:
    properties:
      phone_code:
        description: wx.getPhoneNumber 返回的 code
        type: string
    required:
    - phone_code
    type: object
  model.AppWxmpLoginReq:
    properties:
      code:
        type: string
    required:
    - code
    type: object
  model.AppWxmpProfileReq:
    properties:
      avatar_url:
        maxLength: 500
        type: string
      city:
        maxLength: 50
        type: string
      country:
        maxLength: 50
        type: string
      gender:
        description: 0未知 1男 2女
        enum:
        - 0
        - 1
        - 2
        type: integer
      language:
        maxLength: 20
        type: string
      nick_name:
        maxLength: 50
        type: string
      province:
        maxLength: 50
        type: string
    type: object
  model.BatteryBatchAssignDealerReq:
    properties:
      dealer_id:
        type: string
      device_ids:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - dealer_id
    - device_ids
    type: object
  model.BatteryBatchCommandFailure:
    properties:
      device_id:
        type: string
      device_number:
        type: string
      message:
        type: string
    type: object
  model.BatteryBatchCommandReq:
    properties:
      command_type:
        description: 展示用
        maxLength: 64
        type: string
      device_ids:
        items:
          type: string
        minItems: 1
        type: array
      identify:
        maxLength: 255
        type: string
      value:
        description: JSON 字符串
        maxLength: 9999
        type: string
    required:
    - command_type
    - device_ids
    - identify
    type: object
  model.BatteryBatchCommandResp:
    properties:
      failed:
        type: integer
      failures:
        items:
          $ref: '#/definitions/model.BatteryBatchCommandFailure'
        type: array
      success:
        type: integer
      total:
        type: integer
    type: object
  model.BatteryBatchOtaPushFailure:
    properties:
      device_id:
        type: string
      device_number:
        type: string
      message:
        type: string
    type: object
  model.BatteryBatchOtaPushReq:
    properties:
      description:
        maxLength: 500
        type: string
      device_ids:
        items:
          type: string
        minItems: 1
        type: array
      name:
        description: 可选：任务名称
        maxLength: 200
        type: string
      ota_upgrade_package_id:
        maxLength: 36
        type: string
      remark:
        maxLength: 255
        type: string
    required:
    - device_ids
    - ota_upgrade_package_id
    type: object
  model.BatteryBatchOtaPushResp:
    properties:
      accepted:
        type: integer
      failures:
        items:
          $ref: '#/definitions/model.BatteryBatchOtaPushFailure'
        type: array
      rejected:
        type: integer
      task_id:
        type: string
      total:
        type: integer
    type: object
  model.BatteryImportFailure:
    properties:
      device_number:
        type: string
      message:
        type: string
      row:
        type: integer
    type: object
  model.BatteryImportResp:
    properties:
      failed:
        type: integer
      failures:
        items:
          $ref: '#/definitions/model.BatteryImportFailure'
        type: array
      success:
        type: integer
      total:
        type: integer
    type: object
  model.BatteryListItemResp:
    properties:
      activation_date:
        type: string
      activation_status:
        type: string
      battery_model_id:
        type: string
      battery_model_name:
        type: string
      current_version:
        type: string
      dealer_id:
        description: 已废弃，保留兼容
        type: string
      dealer_name:
        type: string
      device_id:
        type: string
      device_name:
        type: string
      device_number:
        type: string
      is_online:
        type: integer
      owner_org_id:
        description: 组织相关（替代 dealer）
        type: string
      owner_org_name:
        type: string
      owner_org_type:
        type: string
      production_date:
        type: string
      soc:
        type: number
      soh:
        type: number
      transfer_status:
        type: string
      user_id:
        type: string
      user_name:
        type: string
      user_phone:
        type: string
      warranty_expire_date:
        type: string
    type: object
  model.BatteryListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.BatteryListItemResp'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.BatteryModel:
    properties:
      capacity_rated:
        type: number
      cell_count:
        type: integer
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
      nominal_power:
        type: number
      tenant_id:
        type: string
      updated_at:
        type: string
      voltage_rated:
        type: number
      warranty_months:
        type: integer
    type: object
  model.BatteryModelCreateReq:
    properties:
      capacity_rated:
        type: number
      cell_count:
        type: integer
      description:
        type: string
      name:
        type: string
      nominal_power:
        type: number
      voltage_rated:
        type: number
      warranty_months:
        type: integer
    required:
    - name
    type: object
  model.BatteryModelListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.BatteryModelResp'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.BatteryModelResp:
    properties:
      capacity_rated:
        type: number
      cell_count:
        type: integer
      created_at:
        type: string
      description:
        type: string
      device_count:
        description: 关联设备数
        type: integer
      id:
        type: string
      name:
        type: string
      nominal_power:
        type: number
      voltage_rated:
        type: number
      warranty_months:
        type: integer
    type: object
  model.BatteryModelUpdateReq:
    properties:
      capacity_rated:
        type: number
      cell_count:
        type: integer
      description:
        type: string
      name:
        type: string
      nominal_power:
        type: number
      voltage_rated:
        type: number
      warranty_months:
        type: integer
    type: object
  model.BmsDashboardAlarmOverviewResp:
    properties:
      status_counts:
        items:
          $ref: '#/definitions/model.BmsDashboardAlarmStatusCount'
        type: array
      top:
        items:
          $ref: '#/definitions/model.BmsDashboardAlarmTopItem'
        type: array
      trend:
        items:
          $ref: '#/definitions/model.BmsDashboardAlarmTrendPoint'
        type: array
    type: object
  model.BmsDashboardAlarmStatusCount:
    properties:
      count:
        type: integer
      status:
        description: H/M/L/N
        type: string
    type: object
  model.BmsDashboardAlarmTopItem:
    properties:
      count:
        type: integer
      name:
        type: string
    type: object
  model.BmsDashboardAlarmTrendPoint:
    properties:
      count:
        type: integer
      date:
        description: YYYY-MM-DD
        type: string
    type: object
  model.BmsDashboardKpiResp:
    properties:
      alarm_active:
        description: latest_device_alarms 中非 N 的数量
        type: integer
      device_activated:
        type: integer
      device_online:
        type: integer
      device_total:
        type: integer
    type: object
  model.BmsDashboardOnlineTrendPoint:
    properties:
      device_offline:
        type: integer
      device_online:
        type: integer
      device_total:
        type: integer
      timestamp:
        type: string
    type: object
  model.BmsDashboardOnlineTrendResp:
    properties:
      points:
        items:
          $ref: '#/definitions/model.BmsDashboardOnlineTrendPoint'
        type: array
    type: object
  model.Dealer:
    properties:
      address:
        type: string
      city:
        type: string
      contact_person:
        type: string
      created_at:
        type: string
      district:
        type: string
      email:
        type: string
      id:
        description: 经销商ID
        type: string
      name:
        description: 经销商名称
        type: string
      parent_id:
        type: string
      phone:
        type: string
      province:
        type: string
      remark:
        type: string
      tenant_id:
        description: 租户ID
        type: string
      updated_at:
        type: string
    type: object
  model.DealerCreateReq:
    properties:
      address:
        type: string
      city:
        type: string
      contact_person:
        type: string
      district:
        type: string
      email:
        type: string
      name:
        type: string
      parent_id:
        type: string
      phone:
        type: string
      province:
        type: string
      remark:
        type: string
    required:
    - name
    type: object
  model.DealerListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.DealerResp'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.DealerOverviewResp:
    properties:
      active_count:
        type: integer
      dealer_id:
        type: string
      dealer_name:
        type: string
      device_count:
        type: integer
      end_user_count:
        type: integer
      warranty_approved:
        type: integer
      warranty_completed:
        type: integer
      warranty_pending:
        type: integer
      warranty_processing:
        type: integer
      warranty_rejected:
        type: integer
      warranty_total:
        type: integer
    type: object
  model.DealerPermissionTemplateReq:
    properties:
      template:
        enum:
        - BASIC
        - ADVANCED
        type: string
    required:
    - template
    type: object
  model.DealerPermissionTemplateResp:
    properties:
      dealer_id:
        type: string
      role_name:
        description: 对应 casbin 角色名
        type: string
      template:
        description: BASIC/ADVANCED/NONE
        type: string
      user_count:
        type: integer
    type: object
  model.DealerResp:
    properties:
      active_count:
        description: 激活设备数
        type: integer
      address:
        type: string
      city:
        type: string
      contact_person:
        type: string
      created_at:
        type: string
      device_count:
        description: 设备总数
        type: integer
      district:
        type: string
      email:
        type: string
      id:
        type: string
      name:
        type: string
      parent_id:
        type: string
      phone:
        type: string
      province:
        type: string
      remark:
        type: string
    type: object
  model.DealerUpdateReq:
    properties:
      address:
        type: string
      city:
        type: string
      contact_person:
        type: string
      district:
        type: string
      email:
        type: string
      name:
        type: string
      parent_id:
        type: string
      phone:
        type: string
      province:
        type: string
      remark:
        type: string
    type: object
  model.DeviceAuthReq:
    properties:
      device_name:
        description: 设备名称(可选)
        maxLength: 255
        type: string
      device_number:
        description: 设备唯一标识
        maxLength: 255
        type: string
      parent_device_number:
        description: 父设备编号(可选，用于子设备关联)
        maxLength: 255
        type: string
      product_key:
        description: 产品密钥(可选，用于产品关联)
        maxLength: 255
        type: string
      sub_device_addr:
        description: 子设备地址(可选，用于子设备关联)
        maxLength: 255
        type: string
      template_secret:
        description: 模板密钥
        maxLength: 255
        type: string
    required:
    - device_number
    - template_secret
    type: object
  model.DeviceAuthRes:
    properties:
      device_id:
        description: 设备ID
        type: string
      voucher:
        description: 设备凭证
        type: string
    type: object
  model.DeviceBindReq:
    properties:
      device_number:
        type: string
      device_secret:
        description: 设备密钥（可选，用于验证）
        type: string
    required:
    - device_number
    type: object
  model.DeviceTransferListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.DeviceTransferResp'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.DeviceTransferReq:
    properties:
      device_ids:
        items:
          type: string
        type: array
      remark:
        type: string
      to_dealer_id:
        description: 为空表示转移给厂家
        type: string
    required:
    - device_ids
    type: object
  model.DeviceTransferResp:
    properties:
      device_id:
        type: string
      device_model:
        type: string
      device_number:
        type: string
      from_dealer_id:
        type: string
      from_dealer_name:
        type: string
      id:
        type: string
      operator_id:
        type: string
      operator_name:
        type: string
      remark:
        type: string
      to_dealer_id:
        type: string
      to_dealer_name:
        type: string
      transfer_time:
        type: string
    type: object
  model.DeviceUnbindReq:
    properties:
      device_id:
        type: string
    required:
    - device_id
    type: object
  model.DeviceUserBindingListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.DeviceUserBindingResp'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.DeviceUserBindingResp:
    properties:
      binding_time:
        type: string
      device_id:
        type: string
      device_name:
        type: string
      device_number:
        type: string
      id:
        type: string
      is_owner:
        type: boolean
      user_id:
        type: string
      user_name:
        type: string
      user_phone:
        type: string
    type: object
  model.EndUserDeviceItemResp:
    properties:
      binding_id:
        type: string
      binding_time:
        type: string
      device_id:
        type: string
      device_name:
        type: string
      device_number:
        type: string
      is_owner:
        type: boolean
    type: object
  model.EndUserDeviceListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.EndUserDeviceItemResp'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.EndUserForceUnbindReq:
    properties:
      binding_id:
        type: string
    required:
    - binding_id
    type: object
  model.EndUserListItemResp:
    properties:
      dealer_id:
        description: 已废弃，保留兼容
        type: string
      dealer_name:
        type: string
      device_count:
        type: integer
      last_bind_at:
        type: string
      owner_org_id:
        description: 组织相关
        type: string
      owner_org_name:
        type: string
      user_id:
        type: string
      user_name:
        type: string
      user_phone:
        type: string
    type: object
  model.EndUserListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.EndUserListItemResp'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.LoginReq:
    properties:
      email:
        description: 登录账号(输入邮箱或者手机号)
        example: test@test.cn
        type: string
      password:
        description: 密码
        example: "123456"
        maxLength: 512
        minLength: 6
        type: string
      salt:
        description: 随机盐(如果在超管设置了前端RSA加密则需要上送)
        maxLength: 512
        type: string
    required:
    - email
    - password
    type: object
  model.LoginRsp:
    properties:
      expires_in:
        description: 过期时间(单位:秒)
        type: integer
      token:
        description: 登录凭证
        type: string
    type: object
  model.Org:
    properties:
      address:
        description: 详细地址
        type: string
      city:
        description: 城市
        type: string
      contact_person:
        description: 联系人
        type: string
      created_at:
        description: 创建时间
        type: string
      district:
        description: 区县
        type: string
      email:
        description: 邮箱
        type: string
      id:
        description: 组织ID
        type: string
      name:
        description: 组织名称
        type: string
      org_type:
        description: 组织类型
        type: string
      parent_id:
        description: 上级组织ID
        type: string
      phone:
        description: 电话
        type: string
      province:
        description: 省份
        type: string
      remark:
        description: 备注
        type: string
      status:
        description: 状态
        type: string
      tenant_id:
        description: 租户ID
        type: string
      updated_at:
        description: 更新时间
        type: string
    type: object
  model.OrgCreateReq:
    properties:
      address:
        description: 详细地址
        type: string
      city:
        description: 城市
        type: string
      contact_person:
        description: 联系人
        type: string
      district:
        description: 区县
        type: string
      email:
        description: 邮箱
        type: string
      name:
        description: 组织名称
        type: string
      org_type:
        description: '组织类型: BMS_FACTORY, PACK_FACTORY, DEALER, STORE'
        type: string
      parent_id:
        description: 上级组织ID
        type: string
      phone:
        description: 电话
        type: string
      province:
        description: 省份
        type: string
      remark:
        description: 备注
        type: string
    required:
    - name
    - org_type
    type: object
  model.OrgListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.Org'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.OrgTreeNode:
    properties:
      address:
        description: 详细地址
        type: string
      children:
        items:
          $ref: '#/definitions/model.OrgTreeNode'
        type: array
      city:
        description: 城市
        type: string
      contact_person:
        description: 联系人
        type: string
      created_at:
        description: 创建时间
        type: string
      district:
        description: 区县
        type: string
      email:
        description: 邮箱
        type: string
      id:
        description: 组织ID
        type: string
      name:
        description: 组织名称
        type: string
      org_type:
        description: 组织类型
        type: string
      parent_id:
        description: 上级组织ID
        type: string
      phone:
        description: 电话
        type: string
      province:
        description: 省份
        type: string
      remark:
        description: 备注
        type: string
      status:
        description: 状态
        type: string
      tenant_id:
        description: 租户ID
        type: string
      updated_at:
        description: 更新时间
        type: string
    type: object
  model.OrgUpdateReq:
    properties:
      address:
        description: 详细地址
        type: string
      city:
        description: 城市
        type: string
      contact_person:
        description: 联系人
        type: string
      district:
        description: 区县
        type: string
      email:
        description: 邮箱
        type: string
      name:
        description: 组织名称
        type: string
      phone:
        description: 电话
        type: string
      province:
        description: 省份
        type: string
      remark:
        description: 备注
        type: string
      status:
        description: '状态: N-正常, F-禁用'
        type: string
    type: object
  model.Response:
    properties:
      code:
        description: 业务状态码
        example: 200
        type: integer
      data:
        description: 业务数据
      message:
        description: 提示信息
        example: success
        type: string
    type: object
  model.UpdateUserAddressReq:
    properties:
      additional_info:
        description: 附加信息
        maxLength: 500
        type: string
      address_label:
        description: 地址标签
        maxLength: 50
        type: string
      city:
        description: 城市
        maxLength: 50
        type: string
      country:
        description: 国家
        maxLength: 50
        type: string
      detailed_address:
        description: 详细地址
        maxLength: 200
        type: string
      district:
        description: 区县
        maxLength: 50
        type: string
      latitude:
        description: 纬度
        maxLength: 20
        type: string
      longitude:
        description: 经度
        maxLength: 20
        type: string
      postal_code:
        description: 邮政编码
        maxLength: 10
        type: string
      province:
        description: 省份
        maxLength: 50
        type: string
      street:
        description: 街道/乡镇
        maxLength: 100
        type: string
    type: object
  model.UpsertAuthMessageTemplateReq:
    properties:
      channel:
        enum:
        - EMAIL
        - SMS
        maxLength: 16
        type: string
      content:
        maxLength: 10000
        type: string
      provider:
        maxLength: 36
        type: string
      provider_template_code:
        maxLength: 64
        type: string
      remark:
        maxLength: 255
        type: string
      scene:
        enum:
        - LOGIN
        - REGISTER
        - RESET_PASSWORD
        - BIND
        maxLength: 32
        type: string
      status:
        enum:
        - OPEN
        - CLOSE
        maxLength: 16
        type: string
      subject:
        maxLength: 200
        type: string
    required:
    - channel
    - scene
    - status
    type: object
  model.UpsertWxMpAppReq:
    properties:
      app_secret:
        maxLength: 128
        type: string
      appid:
        maxLength: 64
        type: string
      remark:
        maxLength: 255
        type: string
      status:
        enum:
        - OPEN
        - CLOSE
        maxLength: 16
        type: string
    required:
    - app_secret
    - appid
    - status
    type: object
  model.WarrantyApplicationCreateReq:
    properties:
      description:
        type: string
      device_id:
        type: string
      images:
        description: 图片URL数组
        items:
          type: string
        type: array
      type:
        enum:
        - REPAIR
        - RETURN
        - EXCHANGE
        type: string
    required:
    - device_id
    - type
    type: object
  model.WarrantyApplicationListResp:
    properties:
      list:
        items:
          $ref: '#/definitions/model.WarrantyApplicationResp'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  model.WarrantyApplicationResp:
    properties:
      created_at:
        type: string
      description:
        type: string
      device_id:
        type: string
      device_name:
        type: string
      device_number:
        type: string
      handler_id:
        type: string
      handler_name:
        type: string
      id:
        type: string
      images:
        items:
          type: string
        type: array
      result_info:
        additionalProperties: true
        type: object
      status:
        type: string
      type:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
      user_name:
        type: string
      user_phone:
        type: string
    type: object
  model.WarrantyApplicationUpdateReq:
    properties:
      handler_id:
        type: string
      result_info:
        additionalProperties: true
        description: 处理结果信息
        type: object
      status:
        enum:
        - APPROVED
        - REJECTED
        - PROCESSING
        - COMPLETED
        type: string
    type: object
  response.Response:
    properties:
      code:
        type: integer
      data: {}
      message:
        type: string
    type: object
host: localhost:9999
info:
  contact: {}
  description: ThingsPanel API.
  title: ThingsPanel API
  version: "1.0"
paths:
  /api/v1/activation_logs:
    get:
      responses: {}
  /api/v1/alarm/device/counts:
    get:
      consumes:
      - application/json
      description: 获取租户下不同告警状态的设备数量统计
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlarmDeviceCountsResponse'
      summary: 获取租户下告警状态的设备数量
      tags:
      - 告警管理
  /api/v1/app/auth/bind/email:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppBindEmailReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 绑定邮箱
      tags:
      - APP-Auth
  /api/v1/app/auth/bind/phone:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppBindPhoneReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 绑定手机号
      tags:
      - APP-Auth
  /api/v1/app/auth/bindings:
    get:
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AppAuthBindingsResp'
      summary: 当前账号绑定信息
      tags:
      - APP-Auth
  /api/v1/app/auth/config/templates:
    get:
      parameters:
      - description: SYS_ADMIN指定租户
        in: query
        name: tenant_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dal.AuthMessageTemplate'
            type: array
      tags:
      - APP-Auth-Config
    post:
      consumes:
      - application/json
      parameters:
      - description: SYS_ADMIN指定租户
        in: query
        name: tenant_id
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.UpsertAuthMessageTemplateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      tags:
      - APP-Auth-Config
  /api/v1/app/auth/config/wxmp:
    get:
      parameters:
      - description: SYS_ADMIN指定租户
        in: query
        name: tenant_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dal.WxMpApp'
      tags:
      - APP-Auth-Config
    post:
      consumes:
      - application/json
      parameters:
      - description: SYS_ADMIN指定租户
        in: query
        name: tenant_id
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.UpsertWxMpAppReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      tags:
      - APP-Auth-Config
  /api/v1/app/auth/email/code:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppSendEmailCodeReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: APP发送邮箱验证码
      tags:
      - APP-Auth
  /api/v1/app/auth/email/login_by_code:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppEmailLoginByCodeReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.LoginRsp'
      summary: 邮箱验证码登录
      tags:
      - APP-Auth
  /api/v1/app/auth/email/register:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppEmailRegisterReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.LoginRsp'
      summary: 邮箱注册
      tags:
      - APP-Auth
  /api/v1/app/auth/email/reset_password:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppEmailResetPasswordReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 邮箱重置密码
      tags:
      - APP-Auth
  /api/v1/app/auth/phone/code:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppSendPhoneCodeReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: APP发送手机号验证码
      tags:
      - APP-Auth
  /api/v1/app/auth/phone/login_by_code:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppPhoneLoginByCodeReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.LoginRsp'
      summary: 手机号验证码登录
      tags:
      - APP-Auth
  /api/v1/app/auth/phone/register:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppPhoneRegisterReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.LoginRsp'
      summary: 手机号注册
      tags:
      - APP-Auth
  /api/v1/app/auth/phone/reset_password:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppPhoneResetPasswordReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 手机号重置密码
      tags:
      - APP-Auth
  /api/v1/app/auth/unbind:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppUnbindReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 解绑账号（手机/邮箱）
      tags:
      - APP-Auth
  /api/v1/app/auth/wxmp/bind_phone:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppWxmpBindPhoneReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 微信小程序一键绑定手机号
      tags:
      - APP-Auth
  /api/v1/app/auth/wxmp/login:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppWxmpLoginReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.LoginRsp'
      summary: 微信小程序一键登录
      tags:
      - APP-Auth
  /api/v1/app/auth/wxmp/profile:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户ID
        in: header
        name: X-TenantID
        required: true
        type: string
      - description: 请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.AppWxmpProfileReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 微信小程序用户信息解析/保存
      tags:
      - APP-Auth
  /api/v1/app/device/bind:
    post:
      consumes:
      - application/json
      description: 终端用户通过设备编号与可选密钥绑定设备
      parameters:
      - description: 绑定请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.DeviceBindReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: APP绑定设备
      tags:
      - APP-Device
  /api/v1/app/device/list:
    get:
      consumes:
      - application/json
      description: 分页查询用户绑定的设备列表（默认当前登录用户）
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: 用户ID（可选，不传则为当前用户）
        in: query
        name: user_id
        type: string
      - description: 设备编号
        in: query
        name: device_number
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DeviceUserBindingListResp'
      summary: 获取用户绑定设备列表
      tags:
      - APP-Device
  /api/v1/app/device/unbind:
    post:
      consumes:
      - application/json
      description: 终端用户解绑已绑定的设备
      parameters:
      - description: 解绑请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.DeviceUnbindReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: APP解绑设备
      tags:
      - APP-Device
  /api/v1/attribute/datas/{id}:
    delete:
      responses: {}
    get:
      responses: {}
  /api/v1/attribute/datas/set/logs:
    get:
      responses: {}
  /api/v1/battery:
    get:
      consumes:
      - application/json
      description: BMS 电池管理-电池列表（支持厂家/经销商视角数据隔离）
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: 设备编号(序列号)
        in: query
        name: device_number
        type: string
      - description: 电池型号ID
        in: query
        name: battery_model_id
        type: string
      - description: 在线状态(1在线/0离线)
        in: query
        name: is_online
        type: integer
      - description: 激活状态(ACTIVE/INACTIVE)
        in: query
        name: activation_status
        type: string
      - description: 经销商ID
        in: query
        name: dealer_id
        type: string
      - description: 出厂日期开始(YYYY-MM-DD)
        in: query
        name: production_date_start
        type: string
      - description: 出厂日期结束(YYYY-MM-DD)
        in: query
        name: production_date_end
        type: string
      - description: 质保状态(IN在保/OVER过保)
        in: query
        name: warranty_status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BatteryListResp'
      summary: 获取电池列表
      tags:
      - 电池管理
  /api/v1/battery/batch-assign-dealer:
    post:
      consumes:
      - application/json
      description: BMS 电池管理-批量分配经销商
      parameters:
      - description: 请求参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.BatteryBatchAssignDealerReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: 批量分配经销商
      tags:
      - 电池管理
  /api/v1/battery/batch-command:
    post:
      consumes:
      - application/json
      description: BMS 电池管理-批量下发指令（仅在线设备）
      parameters:
      - description: 请求参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.BatteryBatchCommandReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BatteryBatchCommandResp'
      summary: 批量下发指令
      tags:
      - 电池管理
  /api/v1/battery/batch-ota:
    post:
      consumes:
      - application/json
      description: BMS 电池管理-批量 OTA 推送（创建升级任务并触发推送）
      parameters:
      - description: 请求参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.BatteryBatchOtaPushReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BatteryBatchOtaPushResp'
      summary: 批量 OTA 推送
      tags:
      - 电池管理
  /api/v1/battery/export:
    get:
      consumes:
      - application/json
      description: BMS 电池管理-导出电池列表（Excel）
      parameters:
      - description: 设备编号(序列号)
        in: query
        name: device_number
        type: string
      - description: 电池型号ID
        in: query
        name: battery_model_id
        type: string
      - description: 在线状态(1在线/0离线)
        in: query
        name: is_online
        type: integer
      - description: 激活状态(ACTIVE/INACTIVE)
        in: query
        name: activation_status
        type: string
      - description: 经销商ID
        in: query
        name: dealer_id
        type: string
      - description: 出厂日期开始(YYYY-MM-DD)
        in: query
        name: production_date_start
        type: string
      - description: 出厂日期结束(YYYY-MM-DD)
        in: query
        name: production_date_end
        type: string
      - description: 质保状态(IN在保/OVER过保)
        in: query
        name: warranty_status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: file
      summary: 导出电池列表
      tags:
      - 电池管理
  /api/v1/battery/import:
    post:
      consumes:
      - multipart/form-data
      description: BMS 电池管理-导入电池列表（Excel）
      parameters:
      - description: Excel文件
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BatteryImportResp'
      summary: 导入电池列表
      tags:
      - 电池管理
  /api/v1/battery/import/template:
    get:
      consumes:
      - application/json
      description: BMS 电池管理-获取导入模板（Excel）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: file
      summary: 获取导入模板
      tags:
      - 电池管理
  /api/v1/battery/model:
    get:
      consumes:
      - application/json
      description: 分页查询电池型号列表
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: 型号名称
        in: query
        name: name
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BatteryModelListResp'
      summary: 获取电池型号列表
      tags:
      - 电池型号管理
    post:
      consumes:
      - application/json
      description: 创建新的电池型号
      parameters:
      - description: 电池型号信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.BatteryModelCreateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BatteryModel'
      summary: 创建电池型号
      tags:
      - 电池型号管理
  /api/v1/battery/model/{id}:
    delete:
      consumes:
      - application/json
      description: 删除电池型号（需确保无关联设备）
      parameters:
      - description: 电池型号ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 删除电池型号
      tags:
      - 电池型号管理
    get:
      consumes:
      - application/json
      description: 根据ID获取电池型号详细信息
      parameters:
      - description: 电池型号ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BatteryModelResp'
      summary: 获取电池型号详情
      tags:
      - 电池型号管理
    put:
      consumes:
      - application/json
      description: 更新电池型号信息
      parameters:
      - description: 电池型号ID
        in: path
        name: id
        required: true
        type: string
      - description: 电池型号信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.BatteryModelUpdateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BatteryModel'
      summary: 更新电池型号
      tags:
      - 电池型号管理
  /api/v1/battery/offline-commands:
    get:
      responses: {}
    post:
      responses: {}
  /api/v1/battery/offline-commands/{id}:
    delete:
      responses: {}
    get:
      responses: {}
  /api/v1/battery/params/{id}:
    get:
      responses: {}
  /api/v1/battery/params/get:
    post:
      responses: {}
  /api/v1/battery/params/pub:
    post:
      responses: {}
  /api/v1/battery/params/set/logs:
    get:
      responses: {}
  /api/v1/battery/tags:
    get:
      responses: {}
    post:
      responses: {}
  /api/v1/battery/tags/{id}:
    delete:
      responses: {}
    put:
      responses: {}
  /api/v1/battery/tags/assign:
    post:
      responses: {}
  /api/v1/battery_maintenance:
    get:
      responses: {}
    post:
      responses: {}
  /api/v1/battery_maintenance/{id}:
    get:
      responses: {}
  /api/v1/board:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/board/{id}:
    delete:
      responses: {}
    get:
      responses: {}
  /api/v1/board/device:
    get:
      responses: {}
  /api/v1/board/device/total:
    get:
      responses: {}
  /api/v1/board/home:
    get:
      responses: {}
  /api/v1/board/tenant:
    get:
      responses: {}
  /api/v1/board/tenant/device/info:
    get:
      responses: {}
  /api/v1/board/tenant/user/info:
    get:
      responses: {}
  /api/v1/board/trend:
    get:
      responses: {}
  /api/v1/board/user/info:
    get:
      responses: {}
  /api/v1/board/user/update:
    post:
      responses: {}
  /api/v1/board/user/update/password:
    post:
      responses: {}
  /api/v1/casbin/function:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/casbin/function/{id}:
    delete:
      responses: {}
  /api/v1/casbin/user:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/casbin/user/{id}:
    delete:
      responses: {}
  /api/v1/command/datas/set/logs:
    get:
      responses: {}
  /api/v1/dashboard/alarm/overview:
    get:
      parameters:
      - description: 近N天(默认7)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BmsDashboardAlarmOverviewResp'
      summary: BMS Dashboard 告警概览
      tags:
      - BMS-Dashboard
  /api/v1/dashboard/kpi:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BmsDashboardKpiResp'
      summary: BMS Dashboard 指标卡
      tags:
      - BMS-Dashboard
  /api/v1/dashboard/trend/online:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.BmsDashboardOnlineTrendResp'
      summary: BMS Dashboard 在线趋势
      tags:
      - BMS-Dashboard
  /api/v1/data_script:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/data_script/{id}:
    delete:
      responses: {}
  /api/v1/datapolicy:
    get:
      responses: {}
    put:
      responses: {}
  /api/v1/dealer:
    get:
      consumes:
      - application/json
      description: 分页查询经销商列表
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: 经销商名称
        in: query
        name: name
        type: string
      - description: 联系电话
        in: query
        name: phone
        type: string
      - description: 省份
        in: query
        name: province
        type: string
      - description: 城市
        in: query
        name: city
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DealerListResp'
      summary: 获取经销商列表
      tags:
      - 经销商管理
    post:
      consumes:
      - application/json
      description: 创建新的经销商
      parameters:
      - description: 经销商信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.DealerCreateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Dealer'
      summary: 创建经销商
      tags:
      - 经销商管理
  /api/v1/dealer/{id}:
    delete:
      consumes:
      - application/json
      description: 删除经销商（需确保无下级经销商和关联设备）
      parameters:
      - description: 经销商ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 删除经销商
      tags:
      - 经销商管理
    get:
      consumes:
      - application/json
      description: 根据ID获取经销商详细信息
      parameters:
      - description: 经销商ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DealerResp'
      summary: 获取经销商详情
      tags:
      - 经销商管理
    put:
      consumes:
      - application/json
      description: 更新经销商信息
      parameters:
      - description: 经销商ID
        in: path
        name: id
        required: true
        type: string
      - description: 经销商信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.DealerUpdateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Dealer'
      summary: 更新经销商
      tags:
      - 经销商管理
  /api/v1/dealer/{id}/overview:
    get:
      consumes:
      - application/json
      description: 经销商详情聚合数字（设备/终端用户/维保）
      parameters:
      - description: 经销商ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DealerOverviewResp'
      summary: 获取经销商穿透概览
      tags:
      - 经销商管理
  /api/v1/dealer/{id}/permission_template:
    get:
      parameters:
      - description: 经销商ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DealerPermissionTemplateResp'
      summary: 获取经销商权限模板
      tags:
      - 经销商管理
    put:
      consumes:
      - application/json
      parameters:
      - description: 经销商ID
        in: path
        name: id
        required: true
        type: string
      - description: 模板
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.DealerPermissionTemplateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DealerPermissionTemplateResp'
      summary: 设置经销商权限模板
      tags:
      - 经销商管理
  /api/v1/device:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/device/{id}:
    delete:
      responses: {}
  /api/v1/device/active:
    put:
      responses: {}
  /api/v1/device/auth:
    post:
      consumes:
      - application/json
      description: 实现一型一密认证机制，设备通过此接口获取凭证
      parameters:
      - description: 认证请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.DeviceAuthReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/model.DeviceAuthRes'
        "400":
          description: 错误响应
          schema:
            $ref: '#/definitions/errcode.Error'
      summary: 设备动态认证
      tags:
      - 设备认证
  /api/v1/device/check/{deviceNumber}:
    get:
      responses: {}
      tags:
      - 设备管理
  /api/v1/device/detail/{id}:
    get:
      responses: {}
  /api/v1/device/group:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/device/group/{id}:
    delete:
      responses: {}
  /api/v1/device/group/detail/{id}:
    get:
      responses: {}
  /api/v1/device/group/relation:
    delete:
      responses: {}
    get:
      responses: {}
    post:
      responses: {}
  /api/v1/device/group/relation/list:
    get:
      responses: {}
  /api/v1/device/group/tree:
    get:
      responses: {}
  /api/v1/device/online/status/ws:
    get:
      consumes:
      - application/json
      description: 通过WebSocket连接获取实时设备在线状态
      produces:
      - application/json
      responses: {}
      summary: 获取设备在线状态
      tags:
      - 设备
  /api/v1/device/status/history:
    get:
      responses: {}
  /api/v1/device/template:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/device/template/{id}:
    delete:
      responses: {}
  /api/v1/device/template/chart:
    get:
      responses: {}
  /api/v1/device/template/detail/{id}:
    get:
      responses: {}
  /api/v1/device/template/menu:
    get:
      responses: {}
  /api/v1/device/template/selector:
    get:
      responses: {}
  /api/v1/device/template/stats:
    get:
      responses: {}
  /api/v1/device/topic-mappings:
    get:
      responses: {}
    post:
      responses: {}
  /api/v1/device/topic-mappings/{id}:
    delete:
      responses: {}
    put:
      responses: {}
  /api/v1/device/transfer:
    post:
      consumes:
      - application/json
      description: 将设备从一个经销商转移到另一个经销商，或转移回厂家
      parameters:
      - description: 转移请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.DeviceTransferReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 批量转移设备
      tags:
      - 设备转移
  /api/v1/device/transfer/history:
    get:
      consumes:
      - application/json
      description: 分页查询设备转移历史记录
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: 设备编号
        in: query
        name: device_number
        type: string
      - description: 原经销商ID
        in: query
        name: from_dealer_id
        type: string
      - description: 目标经销商ID
        in: query
        name: to_dealer_id
        type: string
      - description: 开始时间
        in: query
        name: start_time
        type: string
      - description: 结束时间
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DeviceTransferListResp'
      summary: 获取设备转移记录
      tags:
      - 设备转移
  /api/v1/device_config:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/device_config/{id}:
    delete:
      responses: {}
    get:
      responses: {}
  /api/v1/device_config/batch:
    put:
      responses: {}
  /api/v1/device_config/menu:
    get:
      responses: {}
  /api/v1/devices/{device_id}/diagnostics:
    get:
      responses: {}
  /api/v1/dict:
    get:
      responses: {}
  /api/v1/dict/column:
    post:
      responses: {}
  /api/v1/dict/column/{id}:
    delete:
      responses: {}
  /api/v1/dict/enum:
    get:
      responses: {}
  /api/v1/dict/language:
    post:
      responses: {}
  /api/v1/dict/language/{id}:
    delete:
      responses: {}
    get:
      responses: {}
  /api/v1/end_user:
    get:
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: 经销商ID（厂家侧可选）
        in: query
        name: dealer_id
        type: string
      - description: 手机号
        in: query
        name: phone
        type: string
      - description: 设备编号
        in: query
        name: device_number
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.EndUserListResp'
      summary: 终端用户列表
      tags:
      - BMS-EndUser
  /api/v1/end_user/devices:
    get:
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: 用户ID
        in: query
        name: user_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.EndUserDeviceListResp'
      summary: 用户绑定设备列表
      tags:
      - BMS-EndUser
  /api/v1/end_user/force_unbind:
    post:
      consumes:
      - application/json
      parameters:
      - description: 解绑请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.EndUserForceUnbindReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 强制解绑
      tags:
      - BMS-EndUser
  /api/v1/event/datas:
    get:
      responses: {}
  /api/v1/file/up:
    post:
      responses: {}
      tags:
      - 文件上传
  /api/v1/login:
    post:
      consumes:
      - application/json
      description: 认证令牌(Token)将在用户成功登录后生成并返回。客户端需要在后续所有需要认证的API请求中，将此令牌添加到HTTP请求头(Header)的'x-token'字段中。服务器将通过验证此令牌来确认用户身份并授权访问受保护资源。
      parameters:
      - description: 登录凭证
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.LoginReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/model.LoginRsp'
        "400":
          description: 错误响应
          schema:
            $ref: '#/definitions/errcode.Error'
      summary: 用户登录
      tags:
      - 用户认证
  /api/v1/logo:
    get:
      responses: {}
    put:
      responses: {}
  /api/v1/notification/services/config:
    post:
      responses: {}
  /api/v1/notification/services/config/{type}:
    get:
      responses: {}
  /api/v1/notification/services/config/e-mail/test:
    post:
      responses: {}
  /api/v1/notification_group:
    post:
      responses: {}
  /api/v1/notification_group/{id}:
    delete:
      responses: {}
    get:
      responses: {}
    put:
      responses: {}
  /api/v1/notification_group/list:
    get:
      responses: {}
  /api/v1/notification_history/list:
    get:
      responses: {}
  /api/v1/open/keys:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/open/keys/{id}:
    delete:
      responses: {}
  /api/v1/operation_logs:
    get:
      responses: {}
  /api/v1/org:
    get:
      consumes:
      - application/json
      description: 分页查询组织列表，支持按类型筛选
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: '组织类型: BMS_FACTORY, PACK_FACTORY, DEALER, STORE'
        in: query
        name: org_type
        type: string
      - description: 组织名称
        in: query
        name: name
        type: string
      - description: '状态: N-正常, F-禁用'
        in: query
        name: status
        type: string
      - description: 父组织ID
        in: query
        name: parent_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.OrgListResp'
      summary: 获取组织列表
      tags:
      - 组织管理
    post:
      consumes:
      - application/json
      description: 创建新的组织（BMS厂家/PACK厂家/经销商/门店）
      parameters:
      - description: 组织信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.OrgCreateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Org'
      summary: 创建组织
      tags:
      - 组织管理
  /api/v1/org/{id}:
    delete:
      consumes:
      - application/json
      description: 删除组织（需确保无子组织和关联设备）
      parameters:
      - description: 组织ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 删除组织
      tags:
      - 组织管理
    get:
      consumes:
      - application/json
      description: 根据ID获取组织详细信息
      parameters:
      - description: 组织ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Org'
      summary: 获取组织详情
      tags:
      - 组织管理
    put:
      consumes:
      - application/json
      description: 更新组织信息（不支持修改上级组织）
      parameters:
      - description: 组织ID
        in: path
        name: id
        required: true
        type: string
      - description: 组织信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.OrgUpdateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 更新组织
      tags:
      - 组织管理
  /api/v1/org/tree:
    get:
      consumes:
      - application/json
      description: 获取组织树结构，可按类型筛选
      parameters:
      - description: 组织类型筛选
        in: query
        name: org_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/model.OrgTreeNode'
            type: array
      summary: 获取组织树
      tags:
      - 组织管理
  /api/v1/ota/package:
    get:
      responses: {}
    post:
      responses: {}
  /api/v1/ota/package/:
    put:
      responses: {}
  /api/v1/ota/package/{id}:
    delete:
      responses: {}
  /api/v1/ota/task:
    get:
      responses: {}
    post:
      responses: {}
  /api/v1/ota/task/{id}:
    delete:
      responses: {}
  /api/v1/ota/task/detail:
    get:
      responses: {}
    put:
      responses: {}
  /api/v1/plugin/devices:
    get:
      responses: {}
  /api/v1/protocol_plugin:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/protocol_plugin/{id}:
    delete:
      responses: {}
  /api/v1/protocol_plugin/config_form:
    get:
      responses: {}
  /api/v1/protocol_plugin/device_config_form:
    get:
      responses: {}
  /api/v1/role:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/role/{id}:
    delete:
      responses: {}
  /api/v1/system/metrics/current:
    get:
      consumes:
      - application/json
      description: 获取系统CPU、内存、磁盘使用率的当前值
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 获取当前系统指标
      tags:
      - 系统监控
  /api/v1/system/metrics/history:
    get:
      consumes:
      - application/json
      description: 获取系统CPU、内存、磁盘使用率的历史数据
      parameters:
      - default: 24
        description: 查询小时数，默认24小时
        in: query
        name: hours
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 获取系统指标历史数据
      tags:
      - 系统监控
  /api/v1/telemetry/datas:
    delete:
      responses: {}
  /api/v1/telemetry/datas/current/{id}:
    get:
      responses: {}
  /api/v1/telemetry/datas/current/detail/{id}:
    get:
      responses: {}
  /api/v1/telemetry/datas/current/keys:
    get:
      responses: {}
  /api/v1/telemetry/datas/current/keys/ws:
    get:
      responses: {}
  /api/v1/telemetry/datas/current/ws:
    get:
      responses: {}
  /api/v1/telemetry/datas/history:
    get:
      responses: {}
  /api/v1/telemetry/datas/history/page:
    get:
      responses: {}
  /api/v1/telemetry/datas/history/pagination:
    get:
      responses: {}
  /api/v1/telemetry/datas/set/logs:
    get:
      responses: {}
  /api/v1/telemetry/datas/statistic:
    get:
      responses: {}
  /api/v1/telemetry/datas/statistic/batch:
    get:
      responses: {}
  /api/v1/ui_elements:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/ui_elements/{id}:
    delete:
      responses: {}
  /api/v1/ui_elements/menu:
    get:
      responses: {}
  /api/v1/user:
    get:
      responses: {}
    post:
      responses: {}
    put:
      responses: {}
  /api/v1/user/{id}:
    delete:
      responses: {}
    get:
      responses: {}
  /api/v1/user/address/{id}:
    put:
      consumes:
      - application/json
      description: 更新指定用户的地址信息，支持创建新地址或更新现有地址
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: string
      - description: 地址信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.UpdateUserAddressReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            type: object
        "400":
          description: 错误响应
          schema:
            $ref: '#/definitions/errcode.Error'
      summary: 更新用户地址信息
      tags:
      - 用户管理
  /api/v1/user/detail:
    get:
      responses: {}
  /api/v1/user/tenant/id:
    get:
      responses: {}
  /api/v1/user/update:
    put:
      responses: {}
  /api/v1/warranty:
    get:
      consumes:
      - application/json
      description: 分页查询维保/售后申请列表
      parameters:
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        required: true
        type: integer
      - description: 设备编号
        in: query
        name: device_number
        type: string
      - description: 申请人用户ID
        in: query
        name: user_id
        type: string
      - description: 类型(REPAIR/RETURN/EXCHANGE)
        in: query
        name: type
        type: string
      - description: 状态(PENDING/APPROVED/REJECTED/PROCESSING/COMPLETED)
        in: query
        name: status
        type: string
      - description: 开始时间(yyyy-MM-dd HH:mm:ss)
        in: query
        name: start_time
        type: string
      - description: 结束时间(yyyy-MM-dd HH:mm:ss)
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.WarrantyApplicationListResp'
      summary: 获取维保申请列表
      tags:
      - Warranty
    post:
      consumes:
      - application/json
      description: 终端用户或经销商创建维保/售后申请
      parameters:
      - description: 维保申请信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.WarrantyApplicationCreateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.WarrantyApplicationResp'
      summary: 创建维保申请
      tags:
      - Warranty
  /api/v1/warranty/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取维保申请完整信息
      parameters:
      - description: 维保申请ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.WarrantyApplicationResp'
      summary: 获取维保申请详情
      tags:
      - Warranty
    put:
      consumes:
      - application/json
      description: 审核/处理维保申请，更新状态与处理结果
      parameters:
      - description: 维保申请ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新内容
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.WarrantyApplicationUpdateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.Response'
      summary: 更新维保申请状态
      tags:
      - Warranty
schemes:
- http
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: x-token
    type: apiKey
swagger: "2.0"
